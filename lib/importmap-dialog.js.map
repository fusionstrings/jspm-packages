{"version":3,"sources":["../src/importmap-dialog.jsx"],"names":[],"mappings":"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","file":"importmap-dialog.js","sourcesContent":["/** @jsx h */\nimport nano, { h } from \"nano-jsx\";\n\nconst { Helmet } = nano;\n\nfunction fromPkgStr(pkg) {\n  const versionIndex = pkg.indexOf(\"@\", 1);\n  const name = pkg.slice(0, versionIndex);\n  let subpathIndex = pkg.indexOf(\"/\", versionIndex);\n  if (subpathIndex === -1) {\n    subpathIndex = pkg.length;\n  }\n  const version = pkg.slice(versionIndex + 1, subpathIndex);\n  const subpath = \".\" + pkg.slice(name.length + version.length + 1);\n  return { name, version, subpath };\n}\n\nfunction ImportMapDialog(\n  {\n    generatorHash = \"\",\n    dependencies = [],\n    open: dialogOpen,\n    toggleImportmapDialog,\n    toggleExportSelection,\n  },\n) {\n  const shouldOpen = dialogOpen && dependencies.length > 0;\n  const open = shouldOpen ? { open: shouldOpen } : {};\n  let map = {};\n  dependencies.forEach((dependency) => {\n    const { name, version, subpath } = fromPkgStr(dependency);\n    if (typeof map[name] === \"undefined\") {\n      map[name] = { [version]: [] };\n    }\n    if (typeof map[name][version] === \"undefined\") {\n      map[name][version] = [];\n    }\n    map[name][version] = [...map[name][version], subpath];\n  });\n  return (\n    <jspm-importmap-dialog>\n      <dialog {...open}>\n        <button class=\"icon-close\" onClick={toggleImportmapDialog}>✕</button>\n        {generatorHash && (\n          <h4>\n            <a\n              target=\"_blank\"\n              href={`https://generator.jspm.io/${generatorHash}`}\n            >\n              Customize importmap at JSPM Generator\n            </a>\n          </h4>\n        )}\n\n        {Object.entries(map).map(([name, versions]) => {\n          const mapEntries = Object.entries(versions);\n          if (mapEntries.length === 1) {\n            const [version, subpaths] = mapEntries[0];\n            return (\n              <details>\n                <summary>\n                  <jspm-importmap-entry-summary>\n                    <jspm-importmap-entry-name>\n                      {name}\n                    </jspm-importmap-entry-name>\n                    <jspm-importmap-entry-version class=\"code\">\n                      v{version}\n                    </jspm-importmap-entry-version>\n                  </jspm-importmap-entry-summary>\n                </summary>\n                <ol>\n                  {subpaths.map((subpath) => (\n                    <li>\n                      <jspm-importmap-entry>\n                        <jspm-importmap-entry-subpath class=\"code\">\n                          {subpath}\n                        </jspm-importmap-entry-subpath>\n                        <button\n                          onClick={toggleExportSelection}\n                          value={`${name}@${version}${subpath.slice(1)}`}\n                        >\n                          &minus; Remove\n                        </button>\n                      </jspm-importmap-entry>\n                    </li>\n                  ))}\n                </ol>\n              </details>\n            );\n          }\n          return (\n            <details>\n              <summary>\n                <jspm-importmap-entry-summary>\n                  {name}\n                </jspm-importmap-entry-summary>\n              </summary>\n\n              {mapEntries.map(([version, subpaths]) => {\n                return (\n                  <details>\n                    <summary>\n                      <jspm-importmap-entry-version class=\"code\">\n                        v{version}\n                      </jspm-importmap-entry-version>\n                    </summary>\n                    <ol>\n                      {subpaths.map((subpath) => (\n                        <li>\n                          <jspm-importmap-entry>\n                            {subpath}\n                            <button\n                              onClick={toggleExportSelection}\n                              value={`${name}@${version}${subpath.slice(1)}`}\n                            >\n                              &minus; Remove\n                            </button>\n                          </jspm-importmap-entry>\n                        </li>\n                      ))}\n                    </ol>\n                  </details>\n                );\n              })}\n            </details>\n          );\n        })}\n      </dialog>\n      <Helmet>\n        <style data-component-name=\"jspm-importmap-dialog\">\n          {`\n          jspm-importmap-dialog dialog  {\n            min-height: 100vh;\n            min-width: 350px;\n            background: white;\n            left: unset;\n            border: 0 solid black;\n\n            \n            border-radius: 0;\n            /*background: linear-gradient(225deg, #e6e6e6, #ffffff);*/\n            /*box-shadow:  -5px 5px 10px #d9d9d9, 5px -5px 10px #ffffff;*/\n            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n          }\n          jspm-importmap-dialog dialog details  {\n            margin: 15px;\n            padding: 10px;\n            -webkit-border-radius: 50px;\n            border-radius: 10px;\n            background: #ffffff;\n            -webkit-box-shadow: 12px 12px 24px #d9d9d9, -12px -12px 24px #ffffff;\n            box-shadow: -12px 12px 24px #d9d9d9, -12px -12px 24px #ffffff;\n          }\n          jspm-importmap-dialog dialog details summary, jspm-importmap-entry-summary{\n            padding: 10px;\n            cursor: pointer;\n            display: flex;\n            align-content: center;\n            justify-content: space-between;\n            align-items: center;\n          }\n          jspm-importmap-dialog dialog details summary:after{\n            content: '›';\n            margin-right: 10px;\n            font-weight: 700;\n            font-size: 1.2rem;\n          }\n          jspm-importmap-dialog dialog details[open] summary:after{\n            content: '⌄';\n          }\n          jspm-importmap-entry-name{\n            font-weight: 700;\n          }\n          jspm-importmap-entry-version{\n            margin-left: 10px;\n          }\n          jspm-importmap-dialog dialog .icon-close{\n            background: white;\n            border: 2px solid black;\n            background: black;\n            color: var(--dl-color-primary-js-primary);\n            cursor: pointer;\n          }\n          jspm-importmap-entry{\n            display: flex;\n            align-content: center;\n            justify-content: space-between;\n            align-items: center;\n          }\n          jspm-importmap-entry button{\n            background: white;\n            border: none;\n            cursor: pointer;\n            color: crimson;\n          }\n          `}\n        </style>\n      </Helmet>\n    </jspm-importmap-dialog>\n  );\n}\n\nexport { ImportMapDialog };\n"]}