{"version":3,"sources":["../src/exports.jsx"],"names":[],"mappings":"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","file":"exports.js","sourcesContent":["import { Component, h, Helmet } from \"nano-jsx\";\n\nfunction getCleanPath(path) {\n  if (path === \".\") {\n    return \"\";\n  }\n  if (path.startsWith(\"./\")) {\n    return path.slice(1);\n  }\n  return path;\n}\n\nfunction Exports(\n  { exports, name, version, importMaps, getImportMap },\n) {\n  return (\n    <jspm-package-exports>\n      {Object.entries(exports).map((\n        [key, value],\n      ) =>\n        key.endsWith(\"!cjs\") || key === \"default\"\n          ? false\n          : (\n            <jspm-package-exports-entry>\n              <details\n                data-subpath={key}\n                data-dependency={`${name}@${version}${getCleanPath(key)}`}\n                onClick={() => {\n                  getImportMap(`${name}@${version}${getCleanPath(key)}`);\n                }}\n              >\n                <summary>\n                  <ExportsKey key={key} name={name} version={version} />\n                </summary>\n                <ExportsValue\n                  key={key}\n                  value={value}\n                  name={name}\n                  version={version}\n                  getImportMap={getImportMap}\n                  importMaps={importMaps}\n                  map={importMaps[`${name}@${version}${getCleanPath(key)}`]}\n                />\n              </details>\n            </jspm-package-exports-entry>\n          )\n      )}\n      <Helmet>\n        <style data-page=\"package-details\">\n          {`\n            jspm-package-exports-entry {\n                display: flex;\n                display: block;\n                padding-left: 10px;\n            }\n            jspm-package-exports-target{\n                margin-left: 20px;\n                display: block;\n            }\n            \n            `}\n        </style>\n      </Helmet>\n    </jspm-package-exports>\n  );\n}\n\nfunction ExportsValue({ key, value, name, version, getImportMap, importMaps, map }) {\n  if (typeof value === \"string\") {\n    // const map = importMaps[`${name}@${version}${getCleanPath(key)}`];\n    return (\n      <jspm-package-exports-target>\n        {value}\n        {map}\n      </jspm-package-exports-target>\n    );\n  } else if (Array.isArray(value)) {\n    return value.map((target) => (\n      <jspm-package-exports-target>{target}</jspm-package-exports-target>\n    ));\n  }\n  return (\n    <Exports\n      exports={value}\n      name={name}\n      version={version}\n      getImportMap={getImportMap}\n      importMaps={importMaps}\n    />\n  );\n}\n\nfunction ExportsKey({ key, name, version }) {\n  return (\n    <jspm-package-exports-key>\n      {key}\n    </jspm-package-exports-key>\n  );\n}\nclass ExportsContainer extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  importMaps = {};\n\n  getImportMap = async (dependency) => {\n    if (typeof document !== \"undefined\") {\n      // const resolvedKey = getResolvedKey({ key, name, version });\n      // console.log(resolvedKey);\n      //consol.log(this.props);\n      const { Generator } = await import(\"@jspm/generator\");\n      const generator = new Generator({\n        env: [\"production\", \"browser\", \"module\"],\n      });\n      await generator.install(dependency);\n      const importMap = JSON.stringify(generator.getMap(), null, 2);\n      console.log(importMap);\n      if (importMap) {\n        this.importMaps = { ...this.importMaps, [dependency]: importMap };\n        this.update();\n      }\n    }\n  };\n\n  render() {\n    const { exports, name, version } = this.props;\n    return (\n      <div>\n        {JSON.stringify(this.importMaps)}\n        <Exports\n          exports={exports}\n          name={name}\n          version={version}\n          getImportMap={this.getImportMap}\n          importMaps={this.importMaps}\n        />\n      </div>\n    );\n  }\n}\n\nclass Exports2 extends Component {\n  checked = true;\n\n  toggle = (e) => {\n    this.checked = !this.checked;\n    this.update();\n  };\n\n  render() {\n    const Text = this.checked ? <p>is checked</p> : null;\n\n    return (\n      <div>\n        <input\n          id=\"checkbox\"\n          type=\"checkbox\"\n          {...(this.checked ? { checked: true } : {})}\n          onClick={this.toggle}\n        />\n        <Text />\n      </div>\n    );\n  }\n}\nexport { ExportsContainer };\n"]}